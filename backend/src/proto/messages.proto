syntax = "proto2";

package messages;

option java_package = "dev.fanchao.mymeet.proto";

message ClientMessage {
  optional string from_user = 1;

  oneof content {
    GroupStateUpdate state_update = 2;
    Command command = 3;
  }
}

message ServerMessage {
  optional string to_user = 1;

  oneof content {
    Command command = 2;
  }
}

message MemberState {
  required string name = 1;
}

message GroupStateUpdate {
  map<string, MemberState> members = 1;
}

message IceCandidate {
  required string sdp = 1;
  required int32 sdp_mline_index = 2;
  required string sdp_mid = 3;
}

enum SdpType {
  OFFER = 0;
  ANSWER = 1;
  PREANSWER = 2;
}

message SdpDescription {
  required SdpType type = 1;
  required string sdp = 2;
}

message Command {
  oneof content {
    SdpDescription description = 2;
    IceCandidate ice_candidate = 3;
  }
}
